<html>
    <head>
        <script
            src="https://code.jquery.com/jquery-2.2.4.min.js"
            integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
            crossorigin="anonymous">
        </script>
        <script type="text/javascript" src="colorlogger.js"></script>
        <script type="text/javascript">

            // alias
            window.cl = window.colorlogger;
            cl.withStackTrace = false;

            // Example: log levels
            var printEachLogLevel = function() {        
                cl.trace("trace");
                cl.debug("debug");
                cl.info("info");
                cl.warn("warn");
                cl.error("error");
                cl.fatal("fatal");
            }

            cl.logLevel = cl.LogLevels.OFF;
            console.log("show none");
            printEachLogLevel();

            cl.logLevel = cl.LogLevels.FATAL;
            console.log("show fatal");
            printEachLogLevel();

            cl.logLevel = cl.LogLevels.ERROR;
            console.log("show error and above");
            printEachLogLevel();

            cl.logLevel = cl.LogLevels.WARN;
            console.log("show warn and above");
            printEachLogLevel();

            cl.logLevel = cl.LogLevels.INFO;
            console.log("show info and above");
            printEachLogLevel();

            cl.logLevel = cl.LogLevels.DEBUG;
            console.log("show debug and above");
            printEachLogLevel();

            cl.logLevel = cl.LogLevels.TRACE;
            console.log("show trace and above");
            printEachLogLevel();

            cl.logLevel = cl.LogLevels.ALL;
            console.log("show all");
            printEachLogLevel();

            
            // Example: stack trace
            cl.withStackTrace = true;

            window.fooA = function(msg) {
                cl.trace("functon A");
                cl.info(msg);
            }

            window.fooB = function(msg) {
                cl.trace("function B");
                fooA(msg);
            }

            window.fooC = function(msg) {
                cl.trace("Function C");
                fooB(msg);
            }

            fooC("Something happens.");


            // Example: stack depth
            cl.maxStackDepth = 2;

            window.recursiveFoo = function(n) {
                cl.trace("n: "+n);

                if (n === 0) {
                    cl.debug("n: 0, end recursion")
                    return;
                }

                recursiveFoo(--n);
            }

            recursiveFoo(10);


            // Example: live division
            cl.withStackTrace = false;

            var getNumerator = function() {
                cl.trace("getNumerator()");
                
                var input = $('[name="numerator"]').val();
                if (!$.isNumeric(input)) {
                    cl.error('"' + input + '" is not a number');
                    return 0;
                }
                return Number(input);
            }


            // Example: live division
            var getDenominator = function() {
                cl.trace("getDenominator()");
                
                var input = $('[name="denominator"]').val();
                if (!$.isNumeric(input)) {
                    cl.error('"' + input + '" is not a number');
                    return 0;
                }
                return Number(input);
            }

            var doDivision = function() {
                cl.trace("doDivision()");

                var numerator = getNumerator();
                cl.debug("Numerator: " + numerator);

                var denominator = getDenominator();
                cl.debug("Denominator: " + denominator);

                if (denominator === 0) {
                    cl.error("division by zero");
                    cl.debug("setting result to NaN");
                    $('[name="result"]').html("NaN");
                } else {
                    cl.info("dividing " + numerator + " by " + denominator);
                    var result = numerator/denominator;

                    cl.debug("setting result to " + result)
                    $('[name="result"]').html(numerator/denominator);
                }
            }

        </script>
    </head>
    <body>
        <input name="numerator" type="text"/>&nbsp;/&nbsp;<input name="denominator" type="text"/>

        <button onclick="doDivision();"="">divide</button>

        <br />

        result: <span name="result"></span>
    </body>
</html>